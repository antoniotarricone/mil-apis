group Retrieve tax code
	SessionSrv -> WS : GET /cards///<pan token>///taxCode
		rnote left
			__header__
			- Version: //<api version>//
		end note
		
	opt PagoBancomat card
		WS -> WS : Search the local DB
			rnote left
				Search unsuccessful
			end note
	end
		
	group Token to PAN
		WS -> PANTokenizer : GET /pans///<pan token>//
			rnote left
				__header__
				- Version: //<api version>//
			end note
		
		PANTokenizer --> WS : HTTP 200 (ok)
			rnote left
				__response body__
				{
					"pan": "//<pan>//"
				}
			end note
	end
		
	group Go to Bancomat or Nexi or SIA or Poste Italiane or Intesa Sanpaolo or ICCREA
		WS -> WS : Search target by BIN
	
		WS -> ServiceCenter : POST /taxcodes
			rnote left
				__request body__
				{
					"pan": "//<pan>//"
				}
			end note
		alt Card not found
		    ServiceCenter --> WS : HTTP 404 (not found)
		else Card not valid
		    ServiceCenter --> WS : HTTP 200 (ok)
        		rnote left
        			__response body__
        			{
        				"taxCode": "//<tax code>//",
        				"status": "V"
        			}
        		end note
        end
	end
		
	WS --> SessionSrv : HTTP 404 (not found)
end